using Microsoft.AspNetCore.Http;
using System.Collections.Generic;

namespace Common.HttpUtilities
{
    public static class HeaderHelper
    {
        /// <summary>
        /// Get only UserId and Email headers.
        /// </summary>
        public static (string UserId, string Email) GetUserInfo(IHeaderDictionary headers)
        {
            var userId = GetHeader(headers, "UserId");
            var email = GetHeader(headers, "Email");
            return (userId, email);
        }

        /// <summary>
        /// Get specific header by key.
        /// </summary>
        public static string GetHeader(IHeaderDictionary headers, string key)
        {
            return headers.TryGetValue(key, out var value) ? value.ToString() : null;
        }

        /// <summary>
        /// Get multiple headers by key list.
        /// </summary>
        public static Dictionary<string, string> GetHeaders(IHeaderDictionary headers, List<string> keysToExtract)
        {
            var result = new Dictionary<string, string>();
            foreach (var key in keysToExtract)
            {
                if (headers.TryGetValue(key, out var value))
                {
                    result[key] = value.ToString();
                }
            }
            return result;
        }
    }
}
